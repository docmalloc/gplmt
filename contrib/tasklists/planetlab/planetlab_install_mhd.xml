<?xml version="1.0" encoding="UTF-8"?>
<tasklist name="Install MHD on PlanetLab node" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../tasklist_schema.xsd">
	
	<run id="0" name="check peer">
		<!-- Check if peer is working -->
	    <command>sudo date</command> 
	    <arguments></arguments> 
	    <timeout>10</timeout>
	    <expected_return_code>0</expected_return_code>
	    <expected_output>2013</expected_output>
	    <stop_on_fail>true</stop_on_fail>
	</run> 

	<sequence name="Install mhd depencies from source" enabled="true">
		<sequence name="Install libnettle" enabled="true"> 
	      	<run id="112" name="Download libnettle">
	            <command>mkdir libnettle; cd libnettle; wget </command> 
	            <arguments>http://ftp.gnu.org/gnu/nettle/nettle-2.5.tar.gz</arguments> 
	            <timeout>150</timeout> 
	            <expected_return_code>0</expected_return_code>
	            <expected_output></expected_output>
	            <stop_on_fail>true</stop_on_fail>
	      	</run>
	      	<run id="113" name="Unpack libnettle">
	            <command>cd libnettle; tar -xzvf</command> 
	            <arguments>nettle-2.5.tar.gz</arguments> 
	            <timeout>150</timeout> 
	            <expected_return_code>0</expected_return_code>
	            <expected_output></expected_output>
	            <stop_on_fail>true</stop_on_fail>
	      	</run>
	      	<run id="114" name="Configure libnettle">
	            <command>cd libnettle/nettle-2.5; ./configure </command> 
	            <arguments></arguments> 
	            <timeout>150</timeout> 
	            <expected_return_code>0</expected_return_code>
	            <expected_output></expected_output>
	            <stop_on_fail>true</stop_on_fail>
	      	</run>
	      	<run id="115" name="Build libnettle">
	            <command>cd libnettle/nettle-2.5; make all</command>
	            <arguments> </arguments> 
	            <timeout>150</timeout> 
	            <expected_return_code>0</expected_return_code>
	            <expected_output></expected_output>
	            <stop_on_fail>true</stop_on_fail>
	      	</run>      	
	      	<run id="116" name="Install libnettle">
	            <command>cd libnettle/nettle-2.5; sudo make install</command>
	            <arguments> </arguments> 
	            <timeout>300</timeout> 
	            <expected_return_code>0</expected_return_code>
	            <expected_output></expected_output>
	            <stop_on_fail>true</stop_on_fail>
	      	</run>
		</sequence>      	
	    <sequence name="Install GnuTLS" enabled="true"> 
	      <run id="117" name="Download GnuTLS">
	            <command>mkdir gnutls; cd gnutls; wget </command> 
	            <arguments>http://ftp.gnu.org/gnu/gnutls/gnutls-2.12.20.tar.bz2</arguments> 
	            <timeout>150</timeout> 
	            <expected_return_code>0</expected_return_code>
	            <expected_output></expected_output>
	            <stop_on_fail>true</stop_on_fail>
	      </run>
	      <run id="118" name="Unpack gnutls">
	            <command>cd gnutls; tar -xvjf</command> 
	            <arguments>gnutls-2.12.20.tar.bz2</arguments> 
	            <timeout>150</timeout> 
	            <expected_return_code>0</expected_return_code>
	            <expected_output></expected_output>
	            <stop_on_fail>true</stop_on_fail>
	      </run>
	      <run id="119" name="Configure gnutls">
	            <command>cd gnutls/gnutls-2.12.20; ./configure</command> 
	            <arguments>--without-p11-kit</arguments> 
	            <timeout>150</timeout> 
	            <expected_return_code>0</expected_return_code>
	            <expected_output></expected_output>
	            <stop_on_fail>true</stop_on_fail>
	      </run>
	      <run id="120" name="Install gnutls">
	            <command>cd gnutls/gnutls-2.12.20; sudo make install</command>
	            <arguments> </arguments> 
	            <timeout>300</timeout> 
	            <expected_return_code>0</expected_return_code>
	            <expected_output></expected_output>
	            <stop_on_fail>true</stop_on_fail>
	      </run>
		</sequence>
		<sequence name="Install mhd" enabled="true">
		  <run id="121" name="Download ">
		        <command>mkdir libmicrohttpd; cd libmicrohttpd; wget </command> 
		        <arguments>ftp://ftp.gnu.org/gnu/libmicrohttpd/libmicrohttpd-0.9.21.tar.gz</arguments> 
		        <timeout>150</timeout> 
		        <expected_return_code>0</expected_return_code>
		        <expected_output></expected_output>
		        <stop_on_fail>true</stop_on_fail>
		  </run>
		  <run id="122" name="Unpack libmicrohttpd">
		        <command>cd libmicrohttpd; tar -xzvf</command> 
		        <arguments>libmicrohttpd-0.9.21.tar.gz</arguments> 
		        <timeout>150</timeout> 
		        <expected_return_code>0</expected_return_code>
		        <expected_output></expected_output>
		        <stop_on_fail>true</stop_on_fail>
		  </run>
		  <run id="123" name="Configure libmicrohttpd">
		        <command>cd libmicrohttpd/libmicrohttpd-0.9.21; ./configure </command> 
		        <arguments>--prefix=/usr/local </arguments> 
		        <timeout>150</timeout> 
		        <expected_return_code>0</expected_return_code>
		        <expected_output></expected_output>
		        <stop_on_fail>true</stop_on_fail>
		  </run>
		  <run id="124" name="Install libmicrohttpd">
		        <command>cd libmicrohttpd/libmicrohttpd-0.9.21; sudo make install</command>
		        <arguments> </arguments> 
		        <timeout>150</timeout> 
		        <expected_return_code>0</expected_return_code>
		        <expected_output></expected_output>
		        <stop_on_fail>true</stop_on_fail>
		  </run>
		<!-- mhd end -->     
		</sequence>
	</sequence>
</tasklist>
